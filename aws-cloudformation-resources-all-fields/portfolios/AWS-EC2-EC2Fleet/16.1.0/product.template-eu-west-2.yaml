AWSTemplateFormatVersion: '2010-09-09'
Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html
Parameters:
  TargetCapacitySpecificationRequestDefaultTargetCapacityType:
    Type: String
    Description: >-
      http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-targetcapacityspecificationrequest.html#cfn-ec2-ec2fleet-targetcapacityspecificationrequest-defaulttargetcapacitytype
    Default: null
  TargetCapacitySpecificationRequestTotalTargetCapacity:
    Type: Number
    Description: >-
      http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-targetcapacityspecificationrequest.html#cfn-ec2-ec2fleet-targetcapacityspecificationrequest-totaltargetcapacity
  TargetCapacitySpecificationRequestOnDemandTargetCapacity:
    Type: Number
    Description: >-
      http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-targetcapacityspecificationrequest.html#cfn-ec2-ec2fleet-targetcapacityspecificationrequest-ondemandtargetcapacity
    Default: null
  TargetCapacitySpecificationRequestSpotTargetCapacity:
    Type: Number
    Description: >-
      http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-targetcapacityspecificationrequest.html#cfn-ec2-ec2fleet-targetcapacityspecificationrequest-spottargetcapacity
    Default: null
  OnDemandOptionsRequestSingleAvailabilityZone:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-ondemandoptionsrequest.html#cfn-ec2-ec2fleet-ondemandoptionsrequest-singleavailabilityzone
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  OnDemandOptionsRequestAllocationStrategy:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-ondemandoptionsrequest.html#cfn-ec2-ec2fleet-ondemandoptionsrequest-allocationstrategy
    Default: null
  OnDemandOptionsRequestSingleInstanceType:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-ondemandoptionsrequest.html#cfn-ec2-ec2fleet-ondemandoptionsrequest-singleinstancetype
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  OnDemandOptionsRequestMinTargetCapacity:
    Type: Number
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-ondemandoptionsrequest.html#cfn-ec2-ec2fleet-ondemandoptionsrequest-mintargetcapacity
    Default: null
  OnDemandOptionsRequestMaxTotalPrice:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-ondemandoptionsrequest.html#cfn-ec2-ec2fleet-ondemandoptionsrequest-maxtotalprice
    Default: null
  OnDemandOptionsRequestCapacityReservationOptionsRequestUsageStrategy:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-capacityreservationoptionsrequest.html#cfn-ec2-ec2fleet-capacityreservationoptionsrequest-usagestrategy
    Default: null
  Type:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-type
    Default: null
  ExcessCapacityTerminationPolicy:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-excesscapacityterminationpolicy
    Default: null
  SpotOptionsRequestSingleAvailabilityZone:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-singleavailabilityzone
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  SpotOptionsRequestAllocationStrategy:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-allocationstrategy
    Default: null
  SpotOptionsRequestSingleInstanceType:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-singleinstancetype
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  SpotOptionsRequestMinTargetCapacity:
    Type: Number
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-mintargetcapacity
    Default: null
  SpotOptionsRequestMaxTotalPrice:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-maxtotalprice
    Default: null
  SpotOptionsRequestInstanceInterruptionBehavior:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-instanceinterruptionbehavior
    Default: null
  SpotOptionsRequestInstancePoolsToUseCount:
    Type: Number
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ec2fleet-spotoptionsrequest.html#cfn-ec2-ec2fleet-spotoptionsrequest-instancepoolstousecount
    Default: null
  ValidFrom:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-validfrom
    Default: null
  ReplaceUnhealthyInstances:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-replaceunhealthyinstances
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  TerminateInstancesWithExpiration:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-terminateinstanceswithexpiration
    AllowedValues:
      - 'true'
      - 'false'
    Default: null
  ValidUntil:
    Type: String
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html#cfn-ec2-ec2fleet-validuntil
    Default: null
Resources:
  Resource:
    Type: AWS::EC2::EC2Fleet
    Description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-ec2fleet.html
    Properties:
      TargetCapacitySpecification:
        DefaultTargetCapacityType: !Ref 'TargetCapacitySpecificationRequestDefaultTargetCapacityType'
        TotalTargetCapacity: !Ref 'TargetCapacitySpecificationRequestTotalTargetCapacity'
        OnDemandTargetCapacity: !Ref 'TargetCapacitySpecificationRequestOnDemandTargetCapacity'
        SpotTargetCapacity: !Ref 'TargetCapacitySpecificationRequestSpotTargetCapacity'
      OnDemandOptions:
        SingleAvailabilityZone: !Ref 'OnDemandOptionsRequestSingleAvailabilityZone'
        AllocationStrategy: !Ref 'OnDemandOptionsRequestAllocationStrategy'
        SingleInstanceType: !Ref 'OnDemandOptionsRequestSingleInstanceType'
        MinTargetCapacity: !Ref 'OnDemandOptionsRequestMinTargetCapacity'
        MaxTotalPrice: !Ref 'OnDemandOptionsRequestMaxTotalPrice'
        CapacityReservationOptions:
          UsageStrategy: !Ref 'OnDemandOptionsRequestCapacityReservationOptionsRequestUsageStrategy'
      Type: !Ref 'Type'
      ExcessCapacityTerminationPolicy: !Ref 'ExcessCapacityTerminationPolicy'
      SpotOptions:
        SingleAvailabilityZone: !Ref 'SpotOptionsRequestSingleAvailabilityZone'
        AllocationStrategy: !Ref 'SpotOptionsRequestAllocationStrategy'
        SingleInstanceType: !Ref 'SpotOptionsRequestSingleInstanceType'
        MinTargetCapacity: !Ref 'SpotOptionsRequestMinTargetCapacity'
        MaxTotalPrice: !Ref 'SpotOptionsRequestMaxTotalPrice'
        InstanceInterruptionBehavior: !Ref 'SpotOptionsRequestInstanceInterruptionBehavior'
        InstancePoolsToUseCount: !Ref 'SpotOptionsRequestInstancePoolsToUseCount'
      ValidFrom: !Ref 'ValidFrom'
      ReplaceUnhealthyInstances: !Ref 'ReplaceUnhealthyInstances'
      TerminateInstancesWithExpiration: !Ref 'TerminateInstancesWithExpiration'
      ValidUntil: !Ref 'ValidUntil'
